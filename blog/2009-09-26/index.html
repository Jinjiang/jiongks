<!DOCTYPE html>
<html>

<head>
  <!-- proud for contributing Vue.js -->
  <meta charset="utf-8">
  <meta name="format-detection" content="telephone=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-touch-fullscreen" content="yes" />

  
  <title>
    
    æµ…æµ…æµ…è°ˆå°† Aero ç‰¹æ•ˆåº”ç”¨åˆ°æ•´ä¸ªçª—ä½“ -
    
    å›§å…‹æ–¯
  </title>

  
<link rel="stylesheet" href="/css/pure.css">

  
<link rel="stylesheet" href="/css/style.css">


  
  <link rel="alternate" href="/atom.xml" title="å›§å…‹æ–¯" type="application/atom+xml">
  
  
  <link rel="icon" href="/favicon.ico">
  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <script>(() => { if ((new Date().getHours() + 6) % 24 < 12) document.body.classList.add('dark-mode') })()</script>

  <div class="dark-mode-helper"></div>

  <div id="wrapper">

    <div id="header">
      <h1>
        <a href="/" title="å›§å…‹æ–¯">
          å›§å…‹æ–¯
        </a>
      </h1>
      <p class="description">
        è¿™é‡Œæ˜¯å‹¾ä¸‰è‚¡å››çš„å®¶
      </p>
    </div>

    <div id="nav" class="pure-menu pure-menu-open pure-menu-horizontal">
      <ul>
        
        <li>
          <a href="/all-demos/">
            çº¿ä¸Š
          </a>
        </li>
        
        <li>
          <a href="/all-slides/">
            çº¿ä¸‹
          </a>
        </li>
        
        <li>
          <a href="/about/">
            å…³äº
          </a>
        </li>
        
        <li><a href="/archives">å½’æ¡£</li>
      </ul>
    </div>

    <div id="main"><div class="content">
  <h2>
    æµ…æµ…æµ…è°ˆå°† Aero ç‰¹æ•ˆåº”ç”¨åˆ°æ•´ä¸ªçª—ä½“
  </h2>
  
<p><mark>æœ¬æ–‡æ‘˜è‡ª å‹¾ä¸‰è‚¡å›› æ›´æ—©æ—¶æœŸçš„ <a target="_blank" rel="noopener" href="http://bulaoge.net/?g3g4">ä¸è€æ­Œ</a> åšå®¢ã€‚</mark></p>

<a id="more"></a>
<p>ä¼ è¯´ä¸­çš„ Aero è¿™ä¸ªè¯ï¼Œæ˜¯æŒ‡ Windows çª—ä½“çš„ä¸€ç§åŠé€æ˜çš„æ˜¾ç¤ºæ•ˆæœã€‚<br />
åœ¨ Vista+ çš„æ“ä½œç³»ç»Ÿé‡Œï¼Œçª—ä½“æ˜¯è‡ªåŠ¨æœ‰ Aero è¾¹æ¡†çš„ï¼Œä½†æœ‰äº›ç¨‹åºä¸ä»…ä»…æ˜¯è¾¹æ¡†æ‰æœ‰ Aero ç‰¹æ•ˆã€‚æ¯”å¦‚ IE / Media Player ç­‰ç­‰ã€‚(è¿™ä¸¤ä¸ªä¾‹å­éƒ½å¿«è¢«äººä¸¾çƒ‚äº†â€¦â€¦)<br />
<br />
å‰é˜µå­çœ‹åˆ°äº† <a href="https://wiki.mozilla.org/Firefox/4.0_Windows_Theme_Mockups" target="_blank">Firefox 4.0 çš„æœªæ¥è®¾è®¡å›¾</a>ï¼Œæ•´ä¸ªçª—ä½“éƒ½æ˜¯ Aero ç‰¹æ•ˆçš„ï¼Œçœ‹è¿‡ä¸€ç›´æµå£æ°´ã€‚ç»è¿‡ä¸€äº›æ— èŠçš„æ¢ç´¢ï¼Œæˆ‘å‘ç°äº†å°† Aero ç‰¹æ•ˆä»è¾¹æ¡†æ‰©å±•åˆ°å…¶å®ƒåŒºåŸŸçš„å®ç°æ–¹æ³•ã€‚<br />
<br />
ä»¥ä¸‹æ˜¯ C# ä»£ç <br />
<br />
åœ¨ C# ä»£ç å‡ºç°ä¹‹å‰<br />
å¥½å§<br />
è¡¨é—®æˆ‘ä¸ºä»€ä¹ˆ Ajax ç¨‹åºå‘˜ä¼šå†™ C#<br />
è¡¨é—®æˆ‘ä¸ºä»€ä¹ˆä¼šå†™ C# å´å»åšä½è´±çš„ Ajax<br />
è¡¨é—®æˆ‘ä¸ºä»€ä¹ˆå†³å®šäº†è¦åš Ajaxï¼Œè¿˜å›å¤´å»çœ‹ C# â€¦â€¦<br />
<br />
<pre>internal class DwmApi
{
    [DllImport("dwmapi.dll", PreserveSig = false)]
    public static extern void DwmExtendFrameIntoClientArea(IntPtr hWnd, MARGINS pMargins);

    [DllImport("dwmapi.dll", PreserveSig = false)]
    public static extern bool DwmIsCompositionEnabled();

    [StructLayout(LayoutKind.Sequential)]
    public class MARGINS
    {
        public int cxLeftWidth, cxRightWidth, cyTopHeight, cyBottomHeight;

        public MARGINS(int left, int top, int right, int bottom)
        {
            cxLeftWidth = left; cyTopHeight = top;
            cxRightWidth = right; cyBottomHeight = bottom;
        }
    }
}</pre>è¿™æ®µä»£ç å¼•å…¥äº†ï¼š<br />
1. æ‰©å±•çª—ä½“â€œå®ä½“â€åŒºåŸŸçš„æ–¹æ³•<br />
2. åˆ¤æ–­å½“å‰æ“ä½œç³»ç»Ÿæ˜¯å¦å¼€å¯äº† Aero æ˜¾ç¤ºæ–¹å¼çš„æ–¹æ³•<br />
3. æè¿°â€œå®ä½“â€åŒºåŸŸçš„æ•°æ®æ ¼å¼<br />
<br />
æœ‰äº†è¿™äº›ä¸œè¥¿ï¼Œä»£ç å°±åŸºæœ¬ä¼šå†™äº†å§^_^
<pre>private void Form1_Load(object sender, EventArgs e)
{
    if (DwmApi.DwmIsCompositionEnabled()) {
        DwmApi.DwmExtendFrameIntoClientArea(this.Handle, new DwmApi.MARGINS(-1, -1, -1, -1));
    }
}

private void OnPaint(object sender, PaintEventArgs e)
{
    if (DwmApi.DwmIsCompositionEnabled())
    {
        e.Graphics.FillRectangle(Brushes.Black, this.ClientRectangle);
    }
}

protected override void WndProc(ref Message m)
{
    base.WndProc(ref m);

    const int WM_DWMCOMPOSITIONCHANGED = 0x031E;

    switch (m.Msg)
    { 
        case WM_DWMCOMPOSITIONCHANGED:
            if (DwmApi.DwmIsCompositionEnabled())
            {
                DwmApi.DwmExtendFrameIntoClientArea(this.Handle, new DwmApi.MARGINS(-1, -1, -1, -1));
            }
            break;
    }
}</pre>è¿™ä¸‰ä¸ªå‡½æ•°åˆ†åˆ«åšçš„æ˜¯ï¼š<br />
1. çª—ä½“è½½å…¥æˆåŠŸåå°†â€œå®ä½“â€çª—ä½“åŒºåŸŸæ‰©å±•åˆ°â€œçª—ä½“å¤–é¢â€ï¼Œè¿™æ ·çª—ä½“å°±ä»¿ä½›å…¨ Aero äº†ï¼Œå®é™…æ˜¯â€œå®ä½“â€åŒºåŸŸä¸å¯è§ç½¢äº†â€”â€”å½“ç„¶è¿™ä¸å½±å“æˆ‘ä»¬å¾€éâ€œå®ä½“â€åŒºåŸŸæ”¾ç½®æ§ä»¶æˆ–åˆ«çš„ä»»ä½•å¯¹è±¡<br />
2. ç»˜åˆ¶çª—ä½“æ—¶ï¼Œå°†â€œå®ä½“â€åŒºåŸŸæ¶‚é»‘(è¿™æ ·åšçš„ç¼˜ç”±è¿˜æ²¡å®Œå…¨ç ”ç©¶æ˜ç™½ï¼Œæ€»ä¹‹è¿™ä¸ªå‡½æ•°ä¸å¯æˆ–ç¼ºï¼Œç­‰æˆ‘å¼„æ˜ç™½äº†ä¼šæŠŠç†ç”±è¡¥ä¸Š)<br />
3. çª—ä½“ç›‘å¬åˆ°æ“ä½œç³»ç»Ÿæ˜¾ç¤ºæ–¹å¼æ”¹å˜æ˜¯ï¼Œåˆ¤æ–­æ˜¯å¦è¿˜æ”¯æŒ Aero ç‰¹æ•ˆï¼Œå¦‚æœæ˜¯ï¼Œåˆ™â€œå®ä½“â€åŒºåŸŸéœ€è¦é‡æ–°æ‰©å±•<br />
<br />
ä¸€ç‚¹æµ…æµ…çš„è®¤è¯†<br />
æœ€åè¡¥ä¸€ä¸ªé“¾æ¥ï¼š<a href="http://tech.ddvip.com/2008-11/122569523088390.html" target="_blank">http://tech.ddvip.com/2008-11/122569523088390.html</a></p>

</div>

<p align="right">
  <small>
    <a href="https://github.com/Jinjiang/jinjiang.github.io/edit/dev/source/_posts/2009-09-26.md" target="_blank">
      å‘æœ¬æ–‡æå‡ºä¿®æ”¹æˆ–å‹˜è¯¯å»ºè®®
    </a>
  </small>
</p>




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>
  const gitalk = new Gitalk({
    clientID: 'c99e23053fc1bba6a58c',
    clientSecret: '64efe1cd1438e77ae2bf8eba92b51c90d0cc2b9f',
    repo: 'jinjiang.github.io',
    owner: 'jinjiang',
    admin: ['jinjiang'],
    id: location.pathname,      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')
</script>
</div>

    <div id="footer">
      <a href="/">å›§å…‹æ–¯</a>
      
      |
      <a href="/atom.xml" title="rss_feed">RSS</a>
      
      |
      æˆ‘æ˜¯ç™¾åº¦ç»Ÿè®¡
      <script src="https://hm.baidu.com/h.js?a0a2372d4b7621d0bfe71f33c58a4bd8"></script>
      |
      æˆ‘ä¼šç¿»è„¸ <a href="#" onclick="document.body.classList.toggle('dark-mode'), event.preventDefault()" style="font-size: 1.25em;">ğŸŒšğŸŒ</a>
    </div>
  </div>

  
<script src="/js/script.js"></script>

</body>

</html>
