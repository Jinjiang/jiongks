<!DOCTYPE html>
<html>

<head>
  <!-- proud for contributing Vue.js -->
  <meta charset="utf-8">
  <meta name="format-detection" content="telephone=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-touch-fullscreen" content="yes" />

  
  <title>
    
    ç”¨ Koa å†™æœåŠ¡ä½“éªŒ -
    
    å›§å…‹æ–¯
  </title>

  
<link rel="stylesheet" href="/css/pure.css">

  
<link rel="stylesheet" href="/css/style.css">


  
  <link rel="alternate" href="/atom.xml" title="å›§å…‹æ–¯" type="application/atom+xml">
  
  
  <link rel="icon" href="/favicon.ico">
  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <script>(() => { if ((new Date().getHours() + 6) % 24 < 12) document.body.classList.add('dark-mode') })()</script>

  <div class="dark-mode-helper"></div>

  <div id="wrapper">

    <div id="header">
      <h1>
        <a href="/" title="å›§å…‹æ–¯">
          å›§å…‹æ–¯
        </a>
      </h1>
      <p class="description">
        è¿™é‡Œæ˜¯å‹¾ä¸‰è‚¡å››çš„å®¶
      </p>
    </div>

    <div id="nav" class="pure-menu pure-menu-open pure-menu-horizontal">
      <ul>
        
        <li>
          <a href="/all-demos/">
            çº¿ä¸Š
          </a>
        </li>
        
        <li>
          <a href="/all-slides/">
            çº¿ä¸‹
          </a>
        </li>
        
        <li>
          <a href="/about/">
            å…³äº
          </a>
        </li>
        
        <li><a href="/archives">å½’æ¡£</li>
      </ul>
    </div>

    <div id="main"><div class="content">
  <h2>
    ç”¨ Koa å†™æœåŠ¡ä½“éªŒ
  </h2>
  <p><img src="http://img2.tbcdn.cn/L1/461/1/5682414ab4dc8dd1b4ff91b0b57f96947c1c1c11" alt="Koa"></p>
<p>æ™’ä¸€ä¸‹è‡ªå·±ç”¨ <a target="_blank" rel="noopener" href="https://koajs.com/">Koa</a> next generation web framework for node.js å†™çš„ä¸€ä¸ª web æœåŠ¡</p>
<p>è¿™ä¸ª web æœåŠ¡ä¸»è¦æ˜¯åšå†…å®¹çš„åˆ—è¡¨å±•ç¤ºå’Œæœç´¢çš„ (å¯èƒ½è¯´å¾—æ¯”è¾ƒæŠ½è±¡ï¼Œä½†ç¡®å®æ˜¯ web æœåŠ¡æœ€å¸¸éœ€è¦åšçš„äº‹æƒ…) ä¸»è¦çš„æ–‡ä»¶ä¸€å…±å°±2ä¸ªï¼š</p>
<ul>
<li><code>app.js</code> ä¸»ç¨‹åº</li>
<li><code>lib/model.js</code> æ•°æ®å±‚</li>
</ul>
<p>å…¶ä¸­ <code>model.js</code> æ˜¯å’Œå…·ä½“ä¸šåŠ¡é€»è¾‘ç›¸å…³çš„ï¼Œå°±ä¸å¤šä»‹ç»äº†ï¼Œè¿™ä¹Ÿä¸æ˜¯ Koa çš„æ ¸å¿ƒï¼›è€Œ <code>app.js</code> çš„ä»£ç å¯ä»¥ä½“ç° Koa çš„å¾ˆå¤šä¼˜ç‚¹ï¼Œä¹Ÿä½¿å¾—ä»£ç å¯ä»¥å†™å¾—éå¸¸ç®€ç»ƒè€Œå»æ¸…æ™°â€”â€”è¿™æ˜¯æˆ‘è‡ªå·±éƒ½å®Œå…¨æ²¡æœ‰æƒ³åˆ°çš„äº‹æƒ…</p>
<a id="more"></a>
<h3 id="åŠ è½½èµ„æºå’Œç›¸å…³ä¾èµ–åº“"><a href="#åŠ è½½èµ„æºå’Œç›¸å…³ä¾èµ–åº“" class="headerlink" title="åŠ è½½èµ„æºå’Œç›¸å…³ä¾èµ–åº“"></a>åŠ è½½èµ„æºå’Œç›¸å…³ä¾èµ–åº“</h3><pre><code>// resources

var koa = require(&apos;koa&apos;)
var app = koa()

var logger = require(&apos;koa-logger&apos;)
var route = require(&apos;koa-route&apos;)

var fs = require(&apos;fs&apos;)
var path = require(&apos;path&apos;)
var extname = path.extname

var views = require(&apos;co-views&apos;)
var render = views(&apos;./views&apos;, &#123;
  map: &#123; html: &apos;ejs&apos; &#125;
&#125;)

var model = require(&apos;./lib/model&apos;)
</code></pre><p>å…¶ä¸­ï¼š</p>
<ol>
<li><code>koa</code> æ˜¯æœ€æ ¸å¿ƒçš„åº“ï¼Œ<code>app</code> æ˜¯ <code>koa</code> ç”Ÿæˆçš„ web æœåŠ¡ä¸»ç¨‹åº</li>
<li><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/koa-logger"><code>koa-logger</code></a> å’Œ <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/koa-route"><code>koa-route</code></a> éƒ½æ˜¯koaå®˜æ–¹å¼€å‘çš„â€œä¸­é—´ä»¶â€ï¼Œåˆ†åˆ«ç”¨æ¥æ‰“å°æ—¥å¿—å’Œè·¯ç”±è®¾ç½®ï¼Œè·¯ç”±è®¾ç½®ç¨åè¿˜ä¼šæåˆ°</li>
<li><code>fs</code> å’Œ <code>path</code> éƒ½æ˜¯ Node çš„å®˜æ–¹åŒ…ï¼Œç”¨æ¥è¿›è¡Œæœ¬åœ°æ–‡ä»¶å’Œè·¯å¾„ç›¸å…³çš„å¤„ç†ï¼Œè¾…åŠ©æ€§è´¨çš„</li>
<li><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/co-views"><code>co-views</code></a> æ˜¯ç”¨æ¥æ¸²æŸ“æ¨¡æ¿çš„åº“ï¼Œè€Œ <code>render</code> æ˜¯å®ƒç”Ÿæˆçš„å®ä¾‹ï¼Œè¿™ä¸ªç”¨æ³•ä¹Ÿè·Ÿä¼ ç»Ÿç”¨æ³•ä¸å¤ªä¸€æ ·ï¼Œç¨åä¼šæåŠ</li>
</ol>
<h3 id="Web-æœåŠ¡å·¥ä½œæµ"><a href="#Web-æœåŠ¡å·¥ä½œæµ" class="headerlink" title="Web æœåŠ¡å·¥ä½œæµ"></a>Web æœåŠ¡å·¥ä½œæµ</h3><pre><code>// workflow

app.use(logger())

app.use(route.get(&apos;/&apos;, list))
app.use(route.get(&apos;/page/:page&apos;, list))
app.use(route.get(&apos;/search/:keywords&apos;, search))
app.use(route.get(&apos;/search/:keywords/:page&apos;, search))

app.use(function *(next) &#123;
  if (!this.path.match(/^\/assets\//)) &#123;
    yield* next
    return
  &#125;
  var path = __dirname + this.path
  var fstat = yield stat(path)

  if (fstat.isFile()) &#123;
    this.type = extname(path)
    this.body = fs.createReadStream(path)
  &#125;
&#125;)

app.use(function *(next) &#123;
  if (this.needRendered) &#123;
    this.body = yield render(this.templateView, &#123;cache: false, data: this.templateModel&#125;)
  &#125;
  yield* next
&#125;)


// utils

function stat(file) &#123;
  return function (done) &#123;
    fs.stat(file, done)
  &#125;
&#125;
</code></pre><p>è¿™éƒ¨åˆ†ä»£ç æ˜¯ç”¨æ¥è§„åˆ’æœåŠ¡å™¨å·¥ä½œæµçš„ï¼Œä»è¯·æ±‚è¢«æ¥å—åˆ°å“åº”è¢«å‘å‡ºï¼Œæ•´ä¸ªè¿‡ç¨‹éƒ½åœ¨è¿™æ®µä»£ç é‡Œä¸€è§ˆæ— ä½™ã€‚å·¥ä½œæµè®¾è®¡çš„ä¸»è¦çš„ç”¨æ³•æ˜¯ <code>app.use(...)</code>ã€‚é‡Œé¢çš„å‚æ•°å…¶å®å°±æ˜¯ä¸€ä¸ª generatorã€‚</p>
<ol>
<li>é¦–å…ˆæ˜¯æ‰“å¼€æ—¥å¿—</li>
<li>ç„¶åæ˜¯åˆ†å‘è·¯ç”±ï¼Œè¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œæœ‰é¦–é¡µã€åˆ—è¡¨ã€æœç´¢ã€æœç´¢åˆ—è¡¨ 4 ç§è®¾è®¡ï¼Œåˆ†åˆ«å¯¹åº”åˆ°äº†å„è‡ªçš„å¤„ç†æ–¹ï¼Œ<code>list</code> å’Œ <code>search</code> å…¶å®éƒ½æ˜¯åœ¨åˆ©ç”¨ <code>lib/model</code> åœ¨ç”Ÿæˆæ•°æ®ï¼Œå‡†å¤‡ç»™æ¨¡æ¿è¿›è¡Œæ¸²æŸ“ã€‚è¿™é‡Œçš„åŸç†ä¹Ÿæœ‰ç‰¹æ®Šä¹‹å¤„ï¼Œç¨åä¼šçœ‹åˆ°</li>
<li>å†çœ‹ç´§éšå…¶åçš„ä¸¤ä¸ª <code>app.use</code>ï¼Œåˆ†åˆ«æ˜¯å¤„ç†é™æ€èµ„æºç›®å½• <code>assets</code> å’Œå¯¹æ¨¡æ¿+æ•°æ®è¿›è¡Œæ¸²æŸ“</li>
</ol>
<p>æ‰€ä»¥å®Œæ•´çš„å·¥ä½œæµå¯ä»¥ç†è§£ä¸ºï¼š</p>
<ol>
<li>è¯·æ±‚é¡µé¢ (åˆ—è¡¨æˆ–æœç´¢) -&gt; <code>logger</code> -&gt; è·¯ç”±åˆ†å‘ -&gt; <code>list</code> æˆ–  <code>search</code> -&gt; æ¨¡æ¿æ¸²æŸ“ -&gt; å›åº”</li>
<li>è¯·æ±‚é™æ€èµ„æº -&gt; <code>logger</code> -&gt; æ‰¾åˆ°å¯¹åº”çš„ <code>assets</code> æ–‡ä»¶ -&gt; å›åº”</li>
</ol>
<h3 id="function-å’Œ-yield-æ˜¯å•¥ï¼Ÿ"><a href="#function-å’Œ-yield-æ˜¯å•¥ï¼Ÿ" class="headerlink" title="function *() {} å’Œ yield æ˜¯å•¥ï¼Ÿ"></a><code>function *() &#123;&#125;</code> å’Œ <code>yield</code> æ˜¯å•¥ï¼Ÿ</h3><p>è¿™ä¸ªå…¶å®æ˜¯ Koa çš„ç²¾é«“æ‰€åœ¨ï¼Œåœ¨ä»‹ç»å®ƒä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæŠŠ <code>list</code> å’Œ <code>search</code> çš„ä»£ç ä¹Ÿè´´å‡ºæ¥ï¼š</p>
<pre><code>// routes

function *list(page, next) &#123;
  next = arguments[arguments.length - 1]
  this.templateView = &apos;page&apos;
  this.templateModel = yield model.list(&#123;page: page&#125;)
  this.needRendered = true
  yield *next
&#125;

function *search(keywords, page, next) &#123;
  next = arguments[arguments.length - 1]
  this.templateView = &apos;search&apos;
  this.templateModel = yield model.search(&#123;keywords: keywords, page: page&#125;)
  this.needRendered = true
  yield *next
&#125;
</code></pre><p>å¤§å®¶ä¼šå‘ç°ï¼Œé¦–å…ˆ <code>app.use(...)</code>  å’Œ <code>route.get(path, ...)</code> ä¼ å…¥çš„å‚æ•°éƒ½æ˜¯ä¸€ç§å†™å¾—å¾ˆåƒå‡½æ•°çš„ä¸œè¥¿ï¼Œä½†ä¸åŒä¹‹å¤„æ˜¯å‡½æ•°çš„å†™æ³•æ˜¯ <code>function foo() &#123;...&#125;</code>ï¼Œè€Œè¿™é‡Œçš„å†™æ³•å¤šäº†ä¸€ä¸ªæ˜Ÿå·ï¼Œå³ <code>function *foo() &#123;&#125;</code>ã€‚è¿™ç§å†™æ³•å…¶å®å°±æ˜¯ ES6 é‡Œçš„ generatorã€‚è€Œ <code>yield</code> æ­£æ˜¯é…åˆè¿™ä¸ªå†™æ³•çš„ä¸€ç§è¯­æ³•ã€‚</p>
<p>æœ‰å…³ ES6 generator çš„åŸºç¡€çŸ¥è¯†ï¼Œå»ºè®®å¤§å®¶æ¥ @å…”å“¥ çš„è¿™ä¸ª <a target="_blank" rel="noopener" href="http://es6.ruanyifeng.com/#docs/generator">ES6 æ•™ç¨‹ç½‘é¡µ</a>æ¥å­¦ä¹ ï¼Œè¿™é‡Œä¸åšåŸç†æ–¹é¢çš„èµ˜è¿°ã€‚ä½†æˆ‘æƒ³è¯´çš„æ˜¯ï¼Œç”±äº web æœåŠ¡çš„å¤„ç†æœ¬èº«å°±æ˜¯â€œä¸€å±‚ä¸€å±‚â€çš„ï¼Œå¹¶ä¸”æœ‰äº›å¤„ç†æ˜¯å¯ä»¥åŒæ­¥çš„ï¼Œæœ‰äº›æ˜¯åªèƒ½å¼‚æ­¥çš„ï¼Œæˆ‘ä»¬ä¸å…è¦ç²¾å¿ƒè®¾è®¡å¾ˆå¤šä¸­é—´ä»¶å¹¶ä¿éšœå®ƒçš„å¯æ‰©å±•æ€§ï¼ŒåŒæ—¶å°½é‡ç®€åŒ–å¼‚æ­¥æ“ä½œçš„å†™æ³•ä¿éšœå®ƒçš„å¯è¯»æ€§ã€‚</p>
<p>æœ‰äº† ES6 generator å’Œ <code>yield</code> ä¹‹åï¼Œæˆ‘ä»¬çš„æ¯ä¸€å±‚ä¸­é—´ä»¶éƒ½å¯ä»¥ä»æµç¨‹ä¸Šçœ‹æˆä¸€ä¸ªä»¥ <code>yield *next</code> è¯­å¥åˆ‡åˆ†å‡ºæ¥çš„ â€œä¸‰æ˜æ²»â€ï¼š</p>
<pre><code>function *(next) &#123;
  // ä¸‹ä¸€æ­¥ä¹‹å‰çš„æ“ä½œ
  yield *next // è¿›è¡Œä¸‹ä¸€æ­¥
  // æ‰€æœ‰é€»è¾‘å¤„ç†å®Œä¹‹åçš„è¡¥å……æ“ä½œ
&#125;
</code></pre><p>è€Œä¸”è¿™ä¸ªâ€œä¸‹ä¸€æ­¥â€æ˜¯ä¸ä»‹æ„æ˜¯ä¸æ˜¯å¼‚æ­¥è¡Œä¸ºï¼Œéƒ½å¯ä»¥è¿™æ ·ç®€å•æè¿°æ¸…æ¥šçš„ã€‚</p>
<p><img src="https://camo.githubusercontent.com/d80cf3b511ef4898bcde9a464de491fa15a50d06/68747470733a2f2f7261772e6769746875622e636f6d2f66656e676d6b322f6b6f612d67756964652f6d61737465722f6f6e696f6e2e706e67" alt="koa workflow"></p>
<p>åå¤´çœ‹æˆ‘ä»¬è®¾è®¡çš„æ•´ä¸ªå·¥ä½œæµçš„å®ç°ï¼š</p>
<p><img src="http://img4.tbcdn.cn/L1/461/1/4e70cfbf5ae5069d6bb1a049cbb73e26241d34a7" alt="workflow"></p>
<p>æˆ‘ä»¬è¿™é‡Œçš„é€»è¾‘åŸºäºå…¨éƒ¨æ˜¯å‡ºç°åœ¨ <code>yield *next</code> ä¹‹å‰çš„ï¼Œä½†æ˜¯å¦‚æœä½ éœ€è¦åœ¨ä¸´å‘å‡ºå“åº”ä¹‹å‰åšç‚¹ä»€ä¹ˆï¼Œå°±å¯ä»¥å†™åœ¨å…¶åé¢äº†</p>
<h3 id="co-views-çš„ç”¨æ³•"><a href="#co-views-çš„ç”¨æ³•" class="headerlink" title="co-views çš„ç”¨æ³•"></a><code>co-views</code> çš„ç”¨æ³•</h3><p><code>co-views</code> å…¶å®æ˜¯å¯¹é€šç”¨æ¨¡æ¿å¼•æ“æ¸²æŸ“å¹³å° <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/consolidate">consolidate</a> çš„å°è£…ï¼Œconsolidate åº”è¯¥ç®—æ˜¯ express.js æ—¶ä»£éå¸¸é‡è¦çš„ä¸€ä¸ªåº“ï¼Œå®ƒæ”¯æŒåŒ…æ‹¬ ejs, mustache, swig ç­‰å„ç§æ¨¡æ¿æ¸²æŸ“å¹¶æä¾›ç»Ÿä¸€çš„ api è°ƒç”¨æ–¹æ³•ã€‚æ ¹æ®å¯¹ <code>co-views</code> æºç çš„åˆ†æï¼Œå®ƒæŠŠ consolidate ç»Ÿä¸€çš„ api åˆå°è£…æˆäº† <code>return function (done) &#123;...&#125;</code> çš„å½¢æ€ï¼Œè¿™æ ·æºä»£ç ä¸­çš„ <code>yield render(view, model)</code> å°±èƒ½å¤Ÿèå…¥ generator çš„é€»è¾‘ä¹‹ä¸­ã€‚</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œæºä»£ç ä¸­ <code>yield render(view, model)</code> è¿™é‡Œçš„ <code>model</code> ä¼ å…¥äº†ä¸€ä¸ª <code>&#123;cache: false&#125;</code> çš„å‚æ•°ï¼Œè¿™ä¼šæ„å‘³ç€æ¨¡æ¿ä¸ä¼šè¢«ç¼“å­˜ï¼Œæ¯æ¬¡ä¿®æ”¹æ¨¡æ¿æ–‡ä»¶ä¹‹åï¼Œåœ¨ä¸é‡å¯æœåŠ¡çš„æƒ…å†µä¸‹ï¼Œåˆ·æ–°é¡µé¢å°±å¯ä»¥çœ‹åˆ°æœ€æ–°çš„æ•ˆæœã€‚è¿™ä¸ªé€‰é¡¹æ˜¯é’ˆå¯¹å¼€å‘ç¯å¢ƒè®¾ç½®çš„ï¼Œä¸ºäº†ä¿éšœçº¿ä¸Šç¯å¢ƒçš„è¿è¡Œæ€§èƒ½å’Œæ•ˆç‡ï¼Œè¿™ä¸ªé€‰é¡¹åº”è¯¥æ˜¯ä¸éœ€è¦çš„ã€‚</p>
<h3 id="lib-model-çš„ç”¨æ³•"><a href="#lib-model-çš„ç”¨æ³•" class="headerlink" title="lib/model çš„ç”¨æ³•"></a><code>lib/model</code> çš„ç”¨æ³•</h3><p>åŒä¸Šï¼Œæˆ‘ä»¬åœ¨ <code>lib/model.js</code> é‡Œå°è£…çš„ <code>yield model.list(&#123;page: page&#125;)</code> å’Œ <code>yield model.search(&#123;keywords: keywords, page: page&#125;)</code> ä¹Ÿéƒ½ä¼šç”Ÿæˆå½¢å¦‚ <code>return function (done) &#123;...&#125;</code> çš„è¿”å›å€¼ï¼Œä»¥èå…¥ generator çš„é€»è¾‘ä¹‹ä¸­ã€‚</p>
<h3 id="æœ€åï¼Œç›‘å¬ç«¯å£"><a href="#æœ€åï¼Œç›‘å¬ç«¯å£" class="headerlink" title="æœ€åï¼Œç›‘å¬ç«¯å£"></a>æœ€åï¼Œç›‘å¬ç«¯å£</h3><pre><code>// listen

app.listen(3000)
console.log(&apos;listening on port 3000&apos;)
</code></pre><p>Thatâ€™s it</p>
<h3 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h3><p>åœ¨é¦–æ¬¡å°è¯•ç”¨ generator çš„æ–¹å¼ç¼–å†™ web æœåŠ¡çš„æ—¶å€™ï¼Œæˆ‘è‡ªå·±ä¸€å¼€å§‹æ€»ä¼šæŠŠ <code>yield</code> çš„ä½ç½®ã€<code>yield</code> åé¢è¦ä¸è¦åŠ æ˜Ÿå·ã€<code>function</code> åé¢è¦ä¸è¦åŠ æ˜Ÿå·ã€<code>app.use()</code> çš„è°ƒç”¨é¡ºåºè¿™å‡ ä»¶äº‹æƒ…å¼„å¾—ä¹±ç³Ÿç³Ÿçš„ï¼Œå¯èƒ½è¿˜æ˜¯å¯¹ generator å’Œ koa çš„ç†è§£ä¸å¤Ÿæ·±å…¥ï¼Œä¸è¿‡é€æ¸å†™ç€å†™ç€ï¼Œæ„Ÿå—åˆ°äº†æ›´å¤šçš„çˆ½å’Œå¿«æ„Ÿã€‚åˆ°æœ€åç”¨å¦‚æ­¤ç®€å•çš„ä¸€ä¸ª js æ–‡ä»¶å®Œæˆäº†å…¨éƒ¨çš„åŠŸèƒ½å’Œé€»è¾‘ä¸²è”ï¼Œè¿˜æ˜¯è§‰å¾—å¾ˆå…´å¥‹çš„ã€‚å¤§å®¶å¦‚æœæ„Ÿå…´è¶£ä¹Ÿå¯ä»¥ææ¥ç©ä¸€ç©ï¼Œå†™ç‚¹è‡ªå·±å¹³æ—¶ç”¨å¾—åˆ°ç”¨ä¸åˆ°çš„å°ç©æ„å„¿ä½“éªŒä¸€ä¸‹ï¼šï¼‰</p>

</div>

<p align="right">
  <small>
    <a href="https://github.com/Jinjiang/jinjiang.github.io/edit/dev/source/_posts/try-koajs.md" target="_blank">
      å‘æœ¬æ–‡æå‡ºä¿®æ”¹æˆ–å‹˜è¯¯å»ºè®®
    </a>
  </small>
</p>



<div id="comments">
  <h2>æ—©æœŸè¯„è®º</h2>
  <ul>
  
    <li id="comment-102139" style="margin-left: 0em;">
      <p>
        <strong>
        summer
        
        </strong>
        <small>2015/06/21 11:09:22</small></p>
      æˆ‘çœ‹koaçš„æ–‡æ¡£æ˜¯ä½¿ç”¨ return yield next , è€Œåšä¸»åˆ™æ˜¯ä½¿ç”¨ yield* next; return; è¿™ä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
    </li>
  
    <li id="comment-102147" style="margin-left: 2em;">
      <p>
        <strong>
        zyEros
        
        </strong>
        <small>2015/06/22 12:03:54</small></p>
      ä»koa-composeçš„æºç å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ªapp.useä¸­çš„genéƒ½æ‰§è¡Œäº†next = middleware[i].call(this,next),æ‰€ä»¥æ¯ä¸ªnextå…¶å®æ˜¯generator iteratorï¼Œåˆå› ä¸ºåœ¨koaæºç é‡Œé¢callbacké‚£ä¸ªæ–¹æ³•ä¸­ä½¿ç”¨äº†co.wrap(compose(wm))ï¼Œæ‰€ä»¥ä¸¤ç§å†™æ³•éƒ½æ˜¯å¯ä»¥çš„ã€‚
    </li>
  
    <li id="comment-102243" style="margin-left: 0em;">
      <p>
        <strong>
        <a href="http://fuxiaohei.me" target="_blank" title="å‚…å°é»‘">å‚…å°é»‘</a>
        
        </strong>
        <small>2015/06/22 06:41:05</small></p>
      *functionå’Œyieldå…¶å®ä¸æ˜¯å¾ˆå–œæ¬¢ï¼Œ<br/>
è¿˜æ˜¯è§‰å¾—ä¸‹ä¸€ä»£çš„asyncå’Œawaitå…³é”®å­—æè¿°ï¼Œä¼šæ›´æ¸…æ™°
    </li>
  
    <li id="comment-108866" style="margin-left: 0em;">
      <p>
        <strong>
        face
        
        </strong>
        <small>2015/09/29 12:00:15</small></p>
      function stat(file) {<br/>
  return function (done) {<br/>
    fs.stat(file, done)<br/>
  }<br/>
}<br/>
é‡Œçš„'done'æ˜¯ä»å“ªé‡Œä¼ è¿›æ¥çš„ï¼Ÿ
    </li>
  
    <li id="comment-111682" style="margin-left: 2em;">
      <p>
        <strong>
        <a href="http://jiongks.name/" target="_blank" title="å›§å…‹æ–¯">å›§å…‹æ–¯</a>
        
        </strong>
        <small>2016/01/06 12:41:15</small></p>
      ç®—æ˜¯ä¸€ç§JSæŠ€å·§å§ï¼Œkoaä»£ç é‡Œé€šç¯‡éƒ½æ˜¯è¿™ç©æ„å„¿â€¦â€¦
    </li>
  
  </ul>
</div>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>
  const gitalk = new Gitalk({
    clientID: 'c99e23053fc1bba6a58c',
    clientSecret: '64efe1cd1438e77ae2bf8eba92b51c90d0cc2b9f',
    repo: 'jinjiang.github.io',
    owner: 'jinjiang',
    admin: ['jinjiang'],
    id: location.pathname,      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')
</script>
</div>

    <div id="footer">
      <a href="/">å›§å…‹æ–¯</a>
      
      |
      <a href="/atom.xml" title="rss_feed">RSS</a>
      
      |
      æˆ‘æ˜¯ç™¾åº¦ç»Ÿè®¡
      <script src="https://hm.baidu.com/h.js?a0a2372d4b7621d0bfe71f33c58a4bd8"></script>
      |
      æˆ‘ä¼šç¿»è„¸ <a href="#" onclick="document.body.classList.toggle('dark-mode'), event.preventDefault()" style="font-size: 1.25em;">ğŸŒšğŸŒ</a>
    </div>
  </div>

  
<script src="/js/script.js"></script>

</body>

</html>
