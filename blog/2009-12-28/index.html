<!DOCTYPE html>
<html>

<head>
  <!-- proud for contributing Vue.js -->
  <meta charset="utf-8">
  <meta name="format-detection" content="telephone=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-touch-fullscreen" content="yes" />

  
  <title>
    
    JS å¯¹ XML æ–‡ä»¶ä¸ XML å­—ç¬¦ä¸²çš„è§£æ -
    
    å›§å…‹æ–¯
  </title>

  
<link rel="stylesheet" href="/css/pure.css">

  
<link rel="stylesheet" href="/css/style.css">


  
  <link rel="alternate" href="/atom.xml" title="å›§å…‹æ–¯" type="application/atom+xml">
  
  
  <link rel="icon" href="/favicon.ico">
  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <script>(() => { if ((new Date().getHours() + 6) % 24 < 12) document.body.classList.add('dark-mode') })()</script>

  <div class="dark-mode-helper"></div>

  <div id="wrapper">

    <div id="header">
      <h1>
        <a href="/" title="å›§å…‹æ–¯">
          å›§å…‹æ–¯
        </a>
      </h1>
      <p class="description">
        è¿™é‡Œæ˜¯å‹¾ä¸‰è‚¡å››çš„å®¶
      </p>
    </div>

    <div id="nav" class="pure-menu pure-menu-open pure-menu-horizontal">
      <ul>
        
        <li>
          <a href="/all-demos/">
            çº¿ä¸Š
          </a>
        </li>
        
        <li>
          <a href="/all-slides/">
            çº¿ä¸‹
          </a>
        </li>
        
        <li>
          <a href="/about/">
            å…³äº
          </a>
        </li>
        
        <li><a href="/archives">å½’æ¡£</li>
      </ul>
    </div>

    <div id="main"><div class="content">
  <h2>
    JS å¯¹ XML æ–‡ä»¶ä¸ XML å­—ç¬¦ä¸²çš„è§£æ
  </h2>
  
<p><mark>æœ¬æ–‡æ‘˜è‡ª å‹¾ä¸‰è‚¡å›› æ›´æ—©æ—¶æœŸçš„ <a target="_blank" rel="noopener" href="http://bulaoge.net/?g3g4">ä¸è€æ­Œ</a> åšå®¢ã€‚</mark></p>

<a id="more"></a>
<p>æœ€è¿‘åœ¨ååŠ©æŸç¥ç§˜çš„â€œæœ‰å…³éƒ¨é—¨â€è°ƒè¯•ä¸€ä¸ªç¥ç§˜çš„ B/S ç³»ç»Ÿï¼Œå‘ç°å…¶ä¸­æœ‰ä¸€æ®µä»£ç æ˜¯å¯¹ XML æ•°æ®è¿›è¡Œè§£æçš„ï¼ŒXML æ•°æ®æ¥æºå¯èƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ª XML æ–‡ä»¶ã€‚åœ¨åŸæ¥çš„ç³»ç»Ÿä¸­ï¼Œè¿™ä¸€éƒ¨åˆ†çš„å®ç°æ–¹å¼æ˜¯ IE only çš„ï¼Œå³ä½¿ç”¨ ActiveX å¯¹è±¡ï¼Œå®ç° load/loadXML çš„æ–¹æ³•ã€‚æ‰€ä»¥ç°åœ¨è¦è§£å†³çš„é—®é¢˜ä¹‹ä¸€ï¼Œå°±æ˜¯ä½¿è¿™ä¸€æ®µä»£ç å¯ä»¥åœ¨IEä»¥å¤–çš„æµè§ˆå™¨ç¯å¢ƒä¸­æ­£å¸¸è¿è¡Œã€‚<br />
<br />
åæ¥å‘ç°äº† DOMParser è¿™ä¸ªä¸œä¸œï¼Œå¯ä»¥åœ¨ IE ä»¥å¤–çš„ç¯å¢ƒä¸­å¯¹ XML å­—ç¬¦ä¸²è¿›è¡Œè§£æå¤„ç†ï¼Œé—®é¢˜è§£å†³äº†ä¸€åŠï¼š<br />
<pre>function loadXml(xml) {

	var doc, parser;

	if (typeof ActiveXObject != 'undefined') {
		parser = new ActiveXObject ("MSXML2.DOMDocument");
		parser.async = false;
		var flag = parser.loadXML(xml);
		doc = parser.documentElement;
	}
	else {
		parser = new DOMParser();
		doc = parser.parseFromString(xml, "text/xml");
		doc = <strong>trim</strong>(doc);
	}

	return doc;
}</pre><br />
å¯¹äºè¯»å– XML æ–‡ä»¶ï¼Œæœ‰æŸ¥åˆ°ä¸€ä¸ª<code>document.implementation.createDocument('', '', null)</code>æ–¹æ³•ï¼Œä½†åªèƒ½åœ¨ Firefox ä¸‹ä½¿ç”¨ï¼Œæ”¾åˆ° Webkit æ ¸å¿ƒçš„æµè§ˆå™¨ä¸­è¿˜æ˜¯ä¸èƒ½æ­£å¸¸å·¥ä½œã€‚æ‰€ä»¥è¿™é‡Œç›´æ¥ç”¨åˆ°äº† Ajax è¯·æ±‚çš„åŒæ­¥å¤„ç†æ–¹å¼ï¼š<br />
<pre>function load(url) {

	var doc, loader;

	if (window.ActiveXObject) {
		try {
			loader = new ActiveXObject("Msxml2.XMLHTTP"); 
		}
		catch (e) {
			loader = new ActiveXObject("Microsoft.XMLHTTP"); 
		}
	}
	else if (window.XMLHttpRequest) {
		loader = new XMLHttpRequest(); 
	}
	
	if (loader != null) {
		loader.open('GET', url, <strong>false</strong>);
		loader.send(null);
		doc = loader.responseXML;
	}

	return <strong>trim</strong>(doc);
}</pre><br />
è¿™ä¸¤å¤§æ®µå‡½æ•°ä½“ä¸­éƒ½å‡ºç°äº†ä¸€ä¸ªå…±åŒçš„å‡½æ•°ï¼š<br />
<pre>function trim(doc) {
	if (doc && doc.childNodes) {
		var firstChild = doc.childNodes[0];
		if (firstChild && firstChild.nodeType == 7) {
			doc.removeChild(firstChild);
		}
	}
	return doc.firstChild;
}</pre><br />
è¿™ä¸ªå‡½æ•°æ˜¯ä¸ºäº†ç»Ÿä¸€å„ç§ä¸åŒçš„ XML è§£æç»“æœçš„æ ¹ç»“ç‚¹(æœ‰äº›è§£æç»“æœä¼šé™„å¸¦ç¼–ç è¯´æ˜ï¼Œæˆ–ç›´æ¥å–ç¼–ç è¯´æ˜åçš„å…„å¼Ÿç»“ç‚¹)ã€‚<br />
<br />
ç†è®ºé˜è¿°å¦‚æ­¤ï¼Œè€Œä¸”å·²ç»åœ¨è‡ªå·±çš„æœ¬å­ä¸Šè¯•è¿‡äº†ã€‚æ˜å¤©å»æœ‰å…³éƒ¨é—¨å®è·µä¸€ä¸‹~</p>

</div>

<p align="right">
  <small>
    <a href="https://github.com/Jinjiang/jinjiang.github.io/edit/dev/source/_posts/2009-12-28.md" target="_blank">
      å‘æœ¬æ–‡æå‡ºä¿®æ”¹æˆ–å‹˜è¯¯å»ºè®®
    </a>
  </small>
</p>




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>
  const gitalk = new Gitalk({
    clientID: 'c99e23053fc1bba6a58c',
    clientSecret: '64efe1cd1438e77ae2bf8eba92b51c90d0cc2b9f',
    repo: 'jinjiang.github.io',
    owner: 'jinjiang',
    admin: ['jinjiang'],
    id: location.pathname,      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')
</script>
</div>

    <div id="footer">
      <a href="/">å›§å…‹æ–¯</a>
      
      |
      <a href="/atom.xml" title="rss_feed">RSS</a>
      
      |
      æˆ‘æ˜¯ç™¾åº¦ç»Ÿè®¡
      <script src="https://hm.baidu.com/h.js?a0a2372d4b7621d0bfe71f33c58a4bd8"></script>
      |
      æˆ‘ä¼šç¿»è„¸ <a href="#" onclick="document.body.classList.toggle('dark-mode'), event.preventDefault()" style="font-size: 1.25em;">ğŸŒšğŸŒ</a>
    </div>
  </div>

  
<script src="/js/script.js"></script>

</body>

</html>
